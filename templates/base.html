<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}–ú–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –¥–æ–º–∞{% endblock %}</title>
    <link id="theme-style" rel="stylesheet" href="/static/css/style.css">
</head>

<body class="page">
<header>
    <div class="container header-inner">
        <div class="logo">HomeStore</div>
            <nav class="header-nav">
                <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="/delivery">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a>
                <a href="/sales">–ê–∫—Ü–∏–∏</a>
                <a href="/about">–û –∫–æ–º–ø–∞–Ω–∏–∏</a>
                <a href="/contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                <a href="/sitemap">–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞</a>
            </nav>
            <div class="header-right">
                <a href="/cart" class="cart-link">üõí{% if session.cart %}<span class="cart-badge">{{ session.cart | length }}</span>
            {% endif %}
                </a>
                {% if session.get("user") %}
                    <span class="user-name">–í—ã –≤–æ—à–ª–∏ –∫–∞–∫ {{ session.user.username }}</span>
                    <a href="/logout" class="header-link">–í—ã—Ö–æ–¥</a>
                {% if session.get("user") and session.user.role == "customer" %}
                    <a href="/orders" class="header-link">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
                {% endif %}
                {% if session.user and session.user.role == "admin" %}
                    <a href="/admin" class="header-link">–ó–∞–∫–∞–∑—ã</a>
                {% endif %}

                {% else %}
                    <a href="/login" class="header-link">–í—Ö–æ–¥</a>
                {% endif %}
                <button id="vision-toggle" class="btn vision-btn" style="margin-left: 12px;">üëÅÔ∏è‚Äçüó®Ô∏è–í–µ—Ä—Å–∏—è –¥–ª—è —Å–ª–∞–±–æ–≤–∏–¥—è—â–∏—Ö</button>
            </div>  
        </div>
</header>

<main class="page-content">
    <div class="container">
        <form action="/search" method="get" class="catalog-search">
            <input
                type="text"
                name="q"
                placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É"
                value="{{ request.args.get('q', '') }}"
                required>
            <button class="btn">–ù–∞–π—Ç–∏</button>
        </form>
    </div>
    {% block content %}{% endblock %}
</main>

<footer>
    <div class="container">
        <div class="footer-col">¬© 2025 –°–µ—Ç—å –º–∞–≥–∞–∑–∏–Ω–æ–≤ HomeStore</div>
        <div class="footer-col">–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</div>
    </div>
</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const slides = document.querySelectorAll(".slide");
    let current = 0;

    slides.forEach(slide => {
        slide.style.backgroundImage = `url(${slide.dataset.bg})`;
    });

    if (slides.length <= 1) return;

    setInterval(() => {
        slides[current].classList.remove("active");
        current = (current + 1) % slides.length;
        slides[current].classList.add("active");
    }, 4000);
});
</script>

<script>
    const toggle = document.getElementById("vision-toggle");
    const theme = document.getElementById("theme-style");

    toggle.addEventListener("click", () => {
        const current = theme.getAttribute("href");

        if (current === "/static/css/style.css") {
            theme.setAttribute("href", "/static/css/vision.css");
        } else {
            theme.setAttribute("href", "/static/css/style.css");
        }
    });
</script>

</body>
</html>